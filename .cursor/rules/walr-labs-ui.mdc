---
description: Instructions for AI agents working on @walr-labs/ui
globs: **/*
alwaysApply: true
---

# @walr-labs/ui - Agent Instructions

## Package Overview

This is the shared UI component library for Walr AI Labs applications.

## Structure

```
src/
├── components/
│   ├── ui/           # Base shadcn-style components
│   │   ├── button.tsx
│   │   ├── card.tsx
│   │   └── avatar.tsx
│   └── Header.tsx    # Shared header component
├── lib/
│   └── utils.ts      # cn() utility
├── styles/
│   └── globals.css   # Theme CSS variables
└── index.ts          # Package exports
```

## Development Workflow

### Testing Changes Locally (yalc)

Use **yalc** to test changes in consumer apps. Do NOT use `file:` or `pnpm link` - they create symlinks that don't work with Next.js Turbopack.

```bash
# In labs-walr-ui: build and publish
pnpm run build
yalc publish

# In consumer app: add from yalc
yalc add @walr-labs/ui

# After making UI changes:
cd labs-walr-ui
pnpm run build && yalc push
# Then refresh browser

# Before committing consumer app:
yalc remove @walr-labs/ui
pnpm install
```

> Consumer apps have husky pre-commit hooks that block commits with yalc references.

### Releasing

1. Make changes and commit
2. Update version in package.json  
3. Tag: `git tag v1.x.x`
4. Push: `git push origin main --tags`

## Adding New Components

1. Create component in `src/components/ui/`
2. Export from `src/components/ui/index.ts`
3. Export from `src/index.ts`
4. Rebuild and test

## Theme Variables

All colors use RGB values for alpha support:

```css
--primary: 6 182 212;  /* Cyan */
--background: 9 9 11;  /* Near black */
--card: 24 24 27;      /* Zinc-900 */
```

Usage in components: `bg-primary`, `text-foreground`, etc.

## Important Notes

- This package is consumed via GitHub, not npm
- Version tags control which version apps use
- Breaking changes require major version bump
- Always test in consumer app before releasing
